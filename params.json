{"name":"Mina-Multistage","tagline":"Plugin for Mina that adds support for multiple stages.","body":"[![Gem Version](https://badge.fury.io/rb/mina-multistage.png)](http://badge.fury.io/rb/mina-multistage) [![Stories in Ready](https://badge.waffle.io/Endoze/mina-multistage.png?label=ready)](https://waffle.io/Endoze/mina-multistage)  \r\n\r\n\r\n# Mina::Multistage\r\n\r\nPlugin for Mina that adds support for multiple stages.\r\n\r\n\r\n## Installation & Usage\r\n\r\nAdd this line to your application's Gemfile:\r\n\r\n```rb\r\ngem 'mina-multistage', require: false\r\n```\r\n\r\nAnd then execute:\r\n\r\n```shell\r\n$ bundle\r\n```\r\n\r\nOr install it yourself as:\r\n\r\n```shell\r\n$ gem install mina-multistage\r\n```\r\n\r\nRequire `mina/multistage` in your `config/deploy.rb`:\r\n\r\n```rb\r\nrequire 'mina/multistage'\r\nrequire 'mina/bundler'\r\nrequire 'mina/rails'\r\nrequire 'mina/git'\r\n\r\n...\r\n\r\ntask setup: :environment do\r\n  ...\r\nend\r\n\r\ndesc 'Deploys the current version to the server.'\r\ntask deploy: :environment do\r\n  ...\r\nend\r\n```\r\n\r\nThen run:\r\n\r\n```shell\r\n$ bundle exec mina multistage:init\r\n```\r\n\r\nThis will create `config/deploy/staging.rb` and `config/deploy/production.rb` stage files.\r\nUse them to define stage specific configuration.\r\n\r\nIf you receive the following error, make sure that you've required 'mina/multistage' in\r\nyour `config/deploy.rb`\r\n\r\n```shell\r\n$ bundle exec mina multistage:init\r\nmina aborted!\r\nDon't know how to build task 'multistage:init'\r\n```\r\n\r\n```rb\r\n# config/deploy/staging.rb\r\nset :domain, 'example.com'\r\nset :deploy_to, '/var/www/my_app'\r\nset :repository, 'https://github.com/user/repo'\r\nset :branch, 'master'\r\nset :user, 'www'\r\nset :rails_env, 'staging'\r\n```\r\n\r\nNow you can deploy the default stage with:\r\n\r\n```shell\r\n$ mina deploy # this deploys staging by default\r\n```\r\n\r\nOr specify a stage explicitly:\r\n\r\n```shell\r\n$ mina staging deploy\r\n$ mina production deploy\r\n```\r\n\r\n\r\n## Configuration\r\n\r\n* `stages` - array of stages names, the default is the name of all `*.rb` files from `stages_dir`\r\n* `stages_dir` - stages files directory, the default is `config/deploy`\r\n* `default_stage` - default stage, the default is `staging`\r\n\r\nIf you want to override the default values for any of these options, they should be set before requiring `mina/multistage`.\r\n\r\n```rb\r\n# config/deploy.rb\r\n\r\nset stages, %w(development test staging production)\r\nset stages_dir, 'config/deploy_stages'\r\nset default_stage, 'development'\r\n\r\nrequire 'mina/multistage'\r\nrequire 'mina/bundler'\r\nrequire 'mina/rails'\r\nrequire 'mina/git'\r\n\r\n...\r\n\r\ntask setup: :environment do\r\n  ...\r\nend\r\n\r\ndesc 'Deploys the current version to the server.'\r\ntask deploy: :environment do\r\n  ...\r\nend\r\n```\r\n\r\n\r\n## Contributing\r\n\r\n1. Fork it\r\n2. Create your feature branch (`git checkout -b my-new-feature`)\r\n3. Commit your changes (`git commit -am 'Add some feature'`)\r\n4. Push to the branch (`git push origin my-new-feature`)\r\n5. Create new Pull Request\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}